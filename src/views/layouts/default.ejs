<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %> | Mural da Fé
    </title>

    <!-- =============================================
         Meta Tags / Open Graph / Twitter Card
         Padrão Corpo Digital — ver docs/project-standards.md §5
         ogMeta é injetado pelo controller por página;
         o fallback abaixo cobre home e páginas genéricas.
    ============================================= -->
    <% if (typeof ogMeta !=='undefined' && ogMeta) { %>
        <%- ogMeta %>
            <% } else { %>
                <meta name="description"
                    content="Mural da Fé — Registro de Memória Digital de graças alcançadas por intercessão dos santos.">
                <meta property="og:site_name" content="Mural da Fé">
                <meta property="og:title" content="<%= title %> | Mural da Fé">
                <meta property="og:description"
                    content="Mural da Fé — Registro de Memória Digital de graças alcançadas por intercessão dos santos.">
                <meta property="og:type" content="website">
                <meta property="og:url" content="<%= BASE_URL %><%= locals.path || '' %>">
                <meta property="og:image" content="<%= BASE_URL %>/images/og-default.png">
                <meta property="og:image:width" content="1200">
                <meta property="og:image:height" content="630">
                <meta property="og:locale" content="pt_BR">
                <meta name="twitter:card" content="summary_large_image">
                <meta name="twitter:title" content="<%= title %> | Mural da Fé">
                <meta name="twitter:description"
                    content="Mural da Fé — Registro de Memória Digital de graças alcançadas por intercessão dos santos.">
                <% } %>
                    <link rel="canonical" href="<%= BASE_URL %><%= locals.path || '' %>">

                    <!-- Google Fonts (Non-Blocking) -->
                    <link rel="preconnect" href="https://fonts.googleapis.com">
                    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                    <link rel="preload" as="style"
                        href="https://fonts.googleapis.com/css2?family=Cardo:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap">
                    <link rel="stylesheet"
                        href="https://fonts.googleapis.com/css2?family=Cardo:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
                        media="print" onload="this.media='all'">
                    <noscript>
                        <link rel="stylesheet"
                            href="https://fonts.googleapis.com/css2?family=Cardo:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap">
                    </noscript>

                    <!-- CSS Principal (Síncrono para evitar FOUC/Atraso de LCP) -->
                    <link rel="stylesheet" href="/css/styles.css">
                    <!-- Google Analytics (carregado após page load para não impactar LCP/FCP) -->
                    <script>
                        // Stub: enfileira chamadas gtag() feitas antes do script carregar
                        window.dataLayer = window.dataLayer || [];
                        function gtag() { dataLayer.push(arguments); }
                        gtag('js', new Date());
                        gtag('config', 'G-5Y0S4VFBZ2');

                        // Injeta o script do GA somente após a página estar visível e interativa
                        function loadGA() {
                            var s = document.createElement('script');
                            s.src = 'https://www.googletagmanager.com/gtag/js?id=G-5Y0S4VFBZ2';
                            s.async = true;
                            document.head.appendChild(s);
                        }

                        if (document.readyState === 'complete') {
                            setTimeout(loadGA, 2000);
                        } else {
                            window.addEventListener('load', function () { setTimeout(loadGA, 2000); });
                        }
                    </script>

                    <!-- =============================================
         Schema.org / JSON-LD
         Padrão Corpo Digital — ver docs/project-standards.md §5.4
    ============================================= -->
                    <% if (typeof jsonLd !=='undefined' && jsonLd) { %>
                        <script type="application/ld+json">
            <%- jsonLd %>
        </script>
                        <% } else { %>
                            <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Mural da Fé",
            "url": "<%= BASE_URL %>",
            "description": "Registro de Memória Digital de graças alcançadas por intercessão dos santos."
        }
        </script>
                            <% } %>
</head>

<body>
    <!-- Header -->
    <header class="bg-primary border-b border-wine/30 sticky top-0 z-50 backdrop-blur-md bg-primary/95">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">

            <!-- Logo -->
            <a href="/" class="group">
                <h1
                    class="font-display text-2xl md:text-3xl text-gold tracking-widest uppercase group-hover:text-ivory transition-colors duration-300">
                    Mural da Fé
                </h1>
                <span
                    class="text-[0.6rem] font-serif text-gold/90 tracking-[0.2em] uppercase block -mt-1 group-hover:text-gold transition-colors">
                    Memória Digital
                </span>
            </a>

            <!-- Desktop Nav -->
            <nav class="hidden md:block">
                <ul class="flex space-x-8">
                    <li>
                        <a href="/"
                            class="font-display text-sm uppercase tracking-widest transition-colors duration-300 py-2 border-b-2 hover:border-gold <%= path === '/' ? 'border-gold text-gold' : 'border-transparent text-ivory hover:text-gold' %>">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="/intercessores"
                            class="font-display text-sm uppercase tracking-widest transition-colors duration-300 py-2 border-b-2 hover:border-gold <%= path === '/intercessores' ? 'border-gold text-gold' : 'border-transparent text-ivory hover:text-gold' %>">
                            Intercessores
                        </a>
                    </li>
                    <li>
                        <a href="/comunidades"
                            class="font-display text-sm uppercase tracking-widest transition-colors duration-300 py-2 border-b-2 hover:border-gold <%= path === '/comunidades' ? 'border-gold text-gold' : 'border-transparent text-ivory hover:text-gold' %>">
                            Comunidades
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" aria-label="Abrir menu de navegação" aria-expanded="false"
                aria-controls="mobile-menu" class="md:hidden text-gold hover:text-ivory focus:outline-none z-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu"
            class="fixed inset-0 bg-primary/95 backdrop-blur-lg z-40 transform translate-x-full transition-transform duration-300 md:hidden flex flex-col items-center justify-center space-y-8">
            <a href="/"
                class="text-2xl font-display uppercase tracking-widest transition-colors block <%= path === '/' ? 'text-gold' : 'text-ivory hover:text-gold' %>">
                Home
            </a>
            <a href="/intercessores"
                class="text-2xl font-display uppercase tracking-widest transition-colors block <%= path === '/intercessores' ? 'text-gold' : 'text-ivory hover:text-gold' %>">
                Intercessores
            </a>
            <a href="/comunidades"
                class="text-2xl font-display uppercase tracking-widest transition-colors block <%= path === '/comunidades' ? 'text-gold' : 'text-ivory hover:text-gold' %>">
                Comunidades
            </a>
        </div>
    </header>

    <!-- Conteúdo principal -->
    <main class="container mx-auto px-4 py-8 flex-grow">
        <%- body %>
    </main>

    <!-- Footer -->
    <footer class="bg-[#0d0407] border-t border-wine/40 py-8 mt-auto">
        <div class="container mx-auto px-4 text-center">
            <p class="font-serif text-gold">&copy; 2026 Mural da Fé. Todos os direitos reservados.</p>
            <p class="text-xs text-gray-300 mt-2 font-sans tracking-wider">by Corpo Digital</p>
        </div>
    </footer>

    <script>
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const body = document.body;

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                const isOpen = !mobileMenu.classList.contains('translate-x-full');
                mobileMenu.classList.toggle('translate-x-full');
                mobileMenuBtn.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
                mobileMenuBtn.setAttribute('aria-label', isOpen ? 'Abrir menu de navegação' : 'Fechar menu de navegação');
                body.style.overflow = isOpen ? 'auto' : 'hidden';
            });
        }
    </script>
</body>

</html>